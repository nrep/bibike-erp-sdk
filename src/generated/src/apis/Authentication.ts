/* tslint:disable */
/* eslint-disable */
/**
 * Bibike ERP API
 * REST API for Bibike ERP - a modular Enterprise Resource Planning system for SMEs in East Africa.  ## Authentication All endpoints (except auth/login and health) require Bearer token authentication. Include the token in the Authorization header: `Authorization: Bearer <token>`  ## Multi-Tenancy All data is scoped to the authenticated user\'s organization. Cross-organization access is not permitted.  ## Versioning API version can be specified via: - Query parameter: `?v=1` - Header: `X-API-Version: 1`  Current supported versions: **v1** (current), **v2** (preview)  Response headers include: - `X-API-Version`: The version used for this request - `X-API-Min-Version`: Minimum supported version - `X-API-Max-Version`: Maximum supported version - `X-API-Deprecated`: Present if using a deprecated version - `X-API-Sunset`: Date when deprecated version will be removed  ## Idempotency For POST/PUT/DELETE requests, include `Idempotency-Key` header to prevent duplicate operations on retries.  ## Rate Limiting Default: 60 requests/minute per token. Custom limits available for integration tokens.  Response headers include: - `X-RateLimit-Limit`: Maximum requests allowed per minute - `X-RateLimit-Remaining`: Requests remaining in current window - `X-RateLimit-Reset`: Unix timestamp when the window resets - `X-RateLimit-Used`: Requests used in current window  When rate limited, you\'ll receive a `429 Too Many Requests` response with a `Retry-After` header. 
 *
 * The version of the OpenAPI document: 1.2.0
 * Contact: support@bibike.fivorana.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  Health200Response,
  Login200Response,
  LoginRequest,
  Verify2fa200Response,
  Verify2faRequest,
} from '../models/index';
import {
    Health200ResponseFromJSON,
    Health200ResponseToJSON,
    Login200ResponseFromJSON,
    Login200ResponseToJSON,
    LoginRequestFromJSON,
    LoginRequestToJSON,
    Verify2fa200ResponseFromJSON,
    Verify2fa200ResponseToJSON,
    Verify2faRequestFromJSON,
    Verify2faRequestToJSON,
} from '../models/index';

export interface LoginOperationRequest {
    loginRequest: LoginRequest;
}

export interface Verify2faOperationRequest {
    verify2faRequest: Verify2faRequest;
}

/**
 * Authentication - interface
 * 
 * @export
 * @interface AuthenticationInterface
 */
export interface AuthenticationInterface {
    /**
     * 
     * @summary API health check
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof AuthenticationInterface
     */
    healthRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Health200Response>>;

    /**
     * API health check
     */
    health(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Health200Response>;

    /**
     * Authenticate with username/email and password.   If 2FA is enabled for the user and no `two_factor_code` is provided,  returns `requires_2fa: true` with a `temp_token` to use with the verify_2fa endpoint.  Supports both `login` (preferred) and `username` fields for the identifier. 
     * @summary Login and get API token
     * @param {LoginRequest} loginRequest 
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof AuthenticationInterface
     */
    loginRaw(requestParameters: LoginOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Login200Response>>;

    /**
     * Authenticate with username/email and password.   If 2FA is enabled for the user and no `two_factor_code` is provided,  returns `requires_2fa: true` with a `temp_token` to use with the verify_2fa endpoint.  Supports both `login` (preferred) and `username` fields for the identifier. 
     * Login and get API token
     */
    login(requestParameters: LoginOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Login200Response>;

    /**
     * 
     * @summary Logout and revoke token
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof AuthenticationInterface
     */
    logoutRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<void>>;

    /**
     * Logout and revoke token
     */
    logout(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<void>;

    /**
     * 
     * @summary Get current user info
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof AuthenticationInterface
     */
    meRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<void>>;

    /**
     * Get current user info
     */
    me(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<void>;

    /**
     * Complete 2FA verification using the temp_token from login response. Supports TOTP codes from authenticator apps and recovery codes. 
     * @summary Verify 2FA code
     * @param {Verify2faRequest} verify2faRequest 
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof AuthenticationInterface
     */
    verify2faRaw(requestParameters: Verify2faOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Verify2fa200Response>>;

    /**
     * Complete 2FA verification using the temp_token from login response. Supports TOTP codes from authenticator apps and recovery codes. 
     * Verify 2FA code
     */
    verify2fa(requestParameters: Verify2faOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Verify2fa200Response>;

}

/**
 * 
 */
export class Authentication extends runtime.BaseAPI implements AuthenticationInterface {

    /**
     * API health check
     */
    async healthRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Health200Response>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        const response = await this.request({
            path: `/?resource=health`,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => Health200ResponseFromJSON(jsonValue));
    }

    /**
     * API health check
     */
    async health(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Health200Response> {
        const response = await this.healthRaw(initOverrides);
        return await response.value();
    }

    /**
     * Authenticate with username/email and password.   If 2FA is enabled for the user and no `two_factor_code` is provided,  returns `requires_2fa: true` with a `temp_token` to use with the verify_2fa endpoint.  Supports both `login` (preferred) and `username` fields for the identifier. 
     * Login and get API token
     */
    async loginRaw(requestParameters: LoginOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Login200Response>> {
        if (requestParameters.loginRequest === null || requestParameters.loginRequest === undefined) {
            throw new runtime.RequiredError('loginRequest','Required parameter requestParameters.loginRequest was null or undefined when calling login.');
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        const response = await this.request({
            path: `/?resource=auth&action=login`,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: LoginRequestToJSON(requestParameters.loginRequest),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => Login200ResponseFromJSON(jsonValue));
    }

    /**
     * Authenticate with username/email and password.   If 2FA is enabled for the user and no `two_factor_code` is provided,  returns `requires_2fa: true` with a `temp_token` to use with the verify_2fa endpoint.  Supports both `login` (preferred) and `username` fields for the identifier. 
     * Login and get API token
     */
    async login(requestParameters: LoginOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Login200Response> {
        const response = await this.loginRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Logout and revoke token
     */
    async logoutRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<void>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const response = await this.request({
            path: `/?resource=auth&action=logout`,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.VoidApiResponse(response);
    }

    /**
     * Logout and revoke token
     */
    async logout(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<void> {
        await this.logoutRaw(initOverrides);
    }

    /**
     * Get current user info
     */
    async meRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<void>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("bearerAuth", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }
        const response = await this.request({
            path: `/?resource=auth&action=me`,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.VoidApiResponse(response);
    }

    /**
     * Get current user info
     */
    async me(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<void> {
        await this.meRaw(initOverrides);
    }

    /**
     * Complete 2FA verification using the temp_token from login response. Supports TOTP codes from authenticator apps and recovery codes. 
     * Verify 2FA code
     */
    async verify2faRaw(requestParameters: Verify2faOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Verify2fa200Response>> {
        if (requestParameters.verify2faRequest === null || requestParameters.verify2faRequest === undefined) {
            throw new runtime.RequiredError('verify2faRequest','Required parameter requestParameters.verify2faRequest was null or undefined when calling verify2fa.');
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        const response = await this.request({
            path: `/?resource=auth&action=verify_2fa`,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: Verify2faRequestToJSON(requestParameters.verify2faRequest),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => Verify2fa200ResponseFromJSON(jsonValue));
    }

    /**
     * Complete 2FA verification using the temp_token from login response. Supports TOTP codes from authenticator apps and recovery codes. 
     * Verify 2FA code
     */
    async verify2fa(requestParameters: Verify2faOperationRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Verify2fa200Response> {
        const response = await this.verify2faRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
